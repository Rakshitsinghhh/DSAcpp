class Solution {
public:
    int N;
    int sum=0;
    bool isSafe(int idx,vector<int>& board) {

        int r = idx / N;
        int c = idx % N;

        for (int i = 0; i < idx; i++) {
            if (board[i] == 1) {
                int r2 = i / N;
                int c2 = i % N;

                if (r == r2)
                    return false;
                if (c == c2)
                    return false;
                if (abs(r - r2) == abs(c - c2))
                    return false;
            }
        }
        return true;
    }

    void solve(int idx, int placed, vector<int>& board) {
        if (placed == N) {
            sum++;
            return;
        }

        if (idx >= N*N) {
            return;
        }

        if (isSafe(idx, board)) {
            board[idx] = 1;
            solve(idx + 1, placed + 1, board);
            board[idx] = 0;
        }

        solve(idx + 1, placed, board);
    }

    int totalNQueens(int n) {
        N = n;
        vector<int> board(n * n, 0);
        sum = 0;

        solve(0, 0, board);

        return sum;
    }
};
